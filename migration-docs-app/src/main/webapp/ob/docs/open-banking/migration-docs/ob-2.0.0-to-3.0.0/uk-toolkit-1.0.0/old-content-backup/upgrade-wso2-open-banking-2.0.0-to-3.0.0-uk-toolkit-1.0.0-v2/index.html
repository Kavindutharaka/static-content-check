
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Open Banking">
      
      
        <meta name="author" content="WSO2">
      
      
        <link rel="canonical" href="https://wso2.com/ob/docs/open-banking/migration-docs/ob-2.0.0-to-3.0.0/uk-toolkit-1.0.0/old-content-backup/upgrade-wso2-open-banking-2.0.0-to-3.0.0-uk-toolkit-1.0.0-v2/">
      
      
      
      <link rel="icon" href="../../../../../../assets/images/identity-server-favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.1.2">
    
    
      
        <title>Upgrading WSO2 Open Banking from 2.0.0 to 3.0.0 - Open Banking</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/libs/fontawesome-free-6.4.2-web/css/all.min.css">
    
      <link rel="stylesheet" href="../../../../../../assets/css/theme.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrading-wso2-open-banking-from-200-to-300" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

   
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a
      href="../../../../../.."
      title="Open Banking"
      class="md-header__button md-logo"
      aria-label="Open Banking"
      data-md-component="logo"
    >
      <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->


    
        <img src="../../../../../../assets/images/ob-light.svg" alt="logo" data-md-component="logo" data-md-color="default">
    
    
        <img src="../../../../../../assets/images/ob-dark.svg" alt="logo" data-md-component="logo" data-md-color="slate">
    

    </a>

    <label class="md-header__button md-icon" for="__drawer">
       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

   
    <form class="md-header__option" data-md-component="palette">
       
      <input
        class="md-option"
        data-md-color-media="(prefers-color-scheme: light)"
        data-md-color-scheme="default"
        data-md-color-primary=""
        data-md-color-accent=""
        
        aria-label="Switch to dark mode"
        
        type="radio"
        name="__palette"
        id="__palette_1"
      />
      
      <label
        class="md-header__button md-icon md-theme-switch md-icon--hover"
        title="Switch to dark mode"
        for="__palette_2"
        hidden
      >
        <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.5 0.5C8.5 0.223858 8.27614 0 8 0C7.72386 0 7.5 0.223858 7.5 0.5V1.5C7.5 1.77614 7.72386 2 8 2C8.27614 2 8.5 1.77614 8.5 1.5V0.5ZM8.5 14.5C8.5 14.2239 8.27614 14 8 14C7.72386 14 7.5 14.2239 7.5 14.5V15.5C7.5 15.7761 7.72386 16 8 16C8.27614 16 8.5 15.7761 8.5 15.5V14.5ZM1.5 8.5C1.77614 8.5 2 8.27614 2 8C2 7.72386 1.77614 7.5 1.5 7.5H0.5C0.223858 7.5 0 7.72386 0 8C0 8.27614 0.223858 8.5 0.5 8.5H1.5ZM15.5 8.5C15.7761 8.5 16 8.27614 16 8C16 7.72386 15.7761 7.5 15.5 7.5H14.5C14.2239 7.5 14 7.72386 14 8C14 8.27614 14.2239 8.5 14.5 8.5H15.5ZM12.4464 2.83936C12.2512 3.03463 12.2512 3.35121 12.4464 3.54647C12.6417 3.74173 12.9583 3.74173 13.1535 3.54647L13.8606 2.83936C14.0559 2.6441 14.0559 2.32752 13.8606 2.13226C13.6654 1.937 13.3488 1.937 13.1535 2.13226L12.4464 2.83936ZM2.14645 2.86065C1.95118 2.66539 1.95118 2.3488 2.14645 2.15354C2.34171 1.95828 2.65829 1.95828 2.85355 2.15354L3.56066 2.86065C3.75592 3.05591 3.75592 3.37249 3.56066 3.56775C3.3654 3.76302 3.04882 3.76302 2.85355 3.56775L2.14645 2.86065ZM2.14645 13.1394C1.95118 13.3346 1.95118 13.6512 2.14645 13.8465C2.34171 14.0417 2.65829 14.0417 2.85355 13.8465L3.56066 13.1394C3.75592 12.9441 3.75592 12.6275 3.56066 12.4322C3.3654 12.237 3.04882 12.237 2.85355 12.4322L2.14645 13.1394ZM12.4464 13.1606C12.2512 12.9654 12.2512 12.6488 12.4464 12.4535C12.6417 12.2583 12.9583 12.2583 13.1535 12.4535L13.8606 13.1606C14.0559 13.3559 14.0559 13.6725 13.8606 13.8677C13.6654 14.063 13.3488 14.063 13.1535 13.8677L12.4464 13.1606ZM6.14708 3.35455C4.303 4.09075 3 5.8932 3 7.99998C3 10.7614 5.23858 13 8 13C10.6789 13 12.8657 10.8933 12.994 8.2462C12.998 8.16463 13 8.08254 13 7.99999C13 7.67166 12.9684 7.35072 12.9079 7.04005C12.2805 7.63501 11.4329 7.99999 10.5 7.99999C8.567 7.99999 7 6.43299 7 4.49999C7 3.98143 7.11277 3.48921 7.31514 3.04651C6.90813 3.10226 6.51674 3.20699 6.14708 3.35457C6.14708 3.35456 6.14708 3.35456 6.14708 3.35455ZM6.00013 4.53503C4.80446 5.22663 4 6.51936 4 7.99998C4 10.2091 5.79086 12 8 12C9.94598 12 11.5674 10.6104 11.9261 8.76934C11.478 8.91895 10.9984 8.99999 10.5 8.99999C8.02641 8.99999 6.01896 7.00418 6.00013 4.53503Z" fill="#40404B"/>
</svg>
      </label>
        
      <input
        class="md-option"
        data-md-color-media="(prefers-color-scheme: dark)"
        data-md-color-scheme="slate"
        data-md-color-primary=""
        data-md-color-accent=""
        
        aria-label="Switch to light mode"
        
        type="radio"
        name="__palette"
        id="__palette_2"
      />
      
      <label
        class="md-header__button md-icon md-theme-switch md-icon--hover"
        title="Switch to light mode"
        for="__palette_1"
        hidden
      >
        <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C8.27614 0 8.5 0.223858 8.5 0.5V1.5C8.5 1.77614 8.27614 2 8 2C7.72386 2 7.5 1.77614 7.5 1.5V0.5C7.5 0.223858 7.72386 0 8 0ZM8 14C8.27614 14 8.5 14.2239 8.5 14.5V15.5C8.5 15.7761 8.27614 16 8 16C7.72386 16 7.5 15.7761 7.5 15.5V14.5C7.5 14.2239 7.72386 14 8 14ZM2 8C2 8.27614 1.77614 8.5 1.5 8.5H0.5C0.223858 8.5 0 8.27614 0 8C0 7.72386 0.223858 7.5 0.5 7.5H1.5C1.77614 7.5 2 7.72386 2 8ZM16 8C16 8.27614 15.7761 8.5 15.5 8.5H14.5C14.2239 8.5 14 8.27614 14 8C14 7.72386 14.2239 7.5 14.5 7.5H15.5C15.7761 7.5 16 7.72386 16 8ZM12.4464 3.54647C12.2512 3.35121 12.2512 3.03463 12.4464 2.83936L13.1535 2.13226C13.3488 1.937 13.6654 1.937 13.8606 2.13226C14.0559 2.32752 14.0559 2.6441 13.8606 2.83936L13.1535 3.54647C12.9583 3.74173 12.6417 3.74173 12.4464 3.54647ZM2.14645 2.15354C1.95118 2.3488 1.95118 2.66539 2.14645 2.86065L2.85355 3.56775C3.04882 3.76302 3.3654 3.76302 3.56066 3.56775C3.75592 3.37249 3.75592 3.05591 3.56066 2.86065L2.85355 2.15354C2.65829 1.95828 2.34171 1.95828 2.14645 2.15354ZM2.14645 13.8465C1.95118 13.6512 1.95118 13.3346 2.14645 13.1394L2.85355 12.4322C3.04882 12.237 3.3654 12.237 3.56066 12.4322C3.75592 12.6275 3.75592 12.9441 3.56066 13.1394L2.85355 13.8465C2.65829 14.0417 2.34171 14.0417 2.14645 13.8465ZM12.4464 12.4535C12.2512 12.6488 12.2512 12.9654 12.4464 13.1606L13.1535 13.8677C13.3488 14.063 13.6654 14.063 13.8606 13.8677C14.0559 13.6725 14.0559 13.3559 13.8606 13.1606L13.1535 12.4535C12.9583 12.2583 12.6417 12.2583 12.4464 12.4535ZM12 8C12 10.2091 10.2091 12 8 12C5.79086 12 4 10.2091 4 8C4 5.79086 5.79086 4 8 4C10.2091 4 12 5.79086 12 8ZM13 8C13 10.7614 10.7614 13 8 13C5.23858 13 3 10.7614 3 8C3 5.23858 5.23858 3 8 3C10.7614 3 13 5.23858 13 8Z" fill="#40404B"/>
</svg>
      </label>
       
    </form>
      
    
    
     
    <label class="md-header__button md-icon md-icon--hover" for="__search">
       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>  
    
    
   
  </nav>
  <script></script>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="Open Banking" class="md-nav__button md-logo" aria-label="Open Banking" data-md-component="logo">
      <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->


    
        <img src="../../../../../../assets/images/ob-light.svg" alt="logo" data-md-component="logo" data-md-color="default">
    
    
        <img src="../../../../../../assets/images/ob-dark.svg" alt="logo" data-md-component="logo" data-md-color="slate">
    

    </a>
    Open Banking
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../..">Home</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Open Banking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Open Banking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../ob-1.4.0-to-1.5.0/">Open Banking 1.4.0 to 1.5.0</a>
          
            <label for="__nav_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Open Banking 1.4.0 to 1.5.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/db-and-synapse-configurations/" class="md-nav__link">
        Databases and Synapse configurations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/custom-configurations/" class="md-nav__link">
        Custom configurations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/application-attribution-changes/" class="md-nav__link">
        Application attribute changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/psd2-data-reporting/" class="md-nav__link">
        PSD2 Data Reporting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/upgrading-wso2-ob-au/" class="md-nav__link">
        Open Banking V1.0.0 to V1.2.0 AU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/upgrading-wso2-ob-berlin/" class="md-nav__link">
        Open Banking V1.3.0 to V1.3.3 Berlin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.4.0-to-1.5.0/upgrading-wso2-ob-uk/" class="md-nav__link">
        Open Banking UK
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../ob-1.5.0-to-2.0.0/">Open Banking 1.5.0 to 2.0.0</a>
          
            <label for="__nav_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Open Banking 1.5.0 to 2.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.5.0-to-2.0.0/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-au/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-au/" class="md-nav__link">
        Open Banking from 1.5.0 to 2.0.0 for Australia
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.5.0-to-2.0.0/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-berlin/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-berlin/" class="md-nav__link">
        Open Banking from 1.5.0 to 2.0.0 for Berlin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.5.0-to-2.0.0/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-uk/upgrade-wso2-open-banking-1.5.0-to-2.0.0-for-uk/" class="md-nav__link">
        Open Banking from 1.5.0 to 2.0.0 for the UK
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_5" id="__nav_2_2_5_label" tabindex="0">
          Supporting Documents
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          Supporting Documents
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ob-1.5.0-to-2.0.0/map-xml-to-toml/" class="md-nav__link">
        Map XML Configurations to TOML Configurations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Open Banking 2.0.0 to 3.0.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Open Banking 2.0.0 to 3.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
          Berlin Toolkit 1.0.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          Berlin Toolkit 1.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/upgrading-wso2-open-banking-200-to-300/" class="md-nav__link">
        Open Banking from 2.0.0 to 3.0.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/upgrading-wso2-api-manager-320/" class="md-nav__link">
        Upgrading to WSO2 API Manager 3.2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/upgrading-wso2-identity-server/" class="md-nav__link">
        Upgrading to WSO2 Identity Sever 5.11.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/upgrading-wso2-api-manager-400/" class="md-nav__link">
        Upgrading to WSO2 API Manager 4.0.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/open-banking-data-migration/" class="md-nav__link">
        Open Banking Data Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../berlin-toolkit-1.0.0/modifications-after-migration/" class="md-nav__link">
        Modifications After Migration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
          CDS Toolkit 1.0.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          CDS Toolkit 1.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cds-toolkit-1.0.0/upgrade-wso2-open-banking-2.0.0-to-3.0.0-cds-toolkit-1.0.0/" class="md-nav__link">
        Upgrading WSO2 Open Banking from 2.0.0 to 3.0.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
          UK Toolkit 1.0.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          UK Toolkit 1.0.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade-wso2-open-banking-2.0.0-to-3.0.0-uk-toolkit-1.0.0/" class="md-nav__link">
        Upgrading WSO2 Open Banking from 2.0.0 to 3.0.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="upgrading-wso2-open-banking-from-200-to-300">Upgrading WSO2 Open Banking from 2.0.0 to 3.0.0<a class="headerlink" href="#upgrading-wso2-open-banking-from-200-to-300" title="Permanent link">&para;</a></h1>
<p>This documentation guides on how to upgrade your WSO2 Open Banking 2.0.0 for the UK setup to WSO2 Open Banking 3.0.0 (Accelerator Model) UK Toolkit 1.0.0.</p>
<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>WSO2 Open Banking solution runs on top of WSO2 Identity Server and WSO2 API Manager which are referred to as base products.</p>
<p>Given below is the product compatibility matrix for the WSO2 Open Banking solution. This matrix outlines the compatibility between the versions of WSO2 Open Banking solutions involved in this migration and the latest version of the base products they support.</p>
<table>
<thead>
<tr>
<th>WSO2 Open Banking Version</th>
<th>Supported WSO2 Identity Server Version</th>
<th>Supported WSO2 API Manager Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.0.0</td>
<td>5.10.0</td>
<td>3.1.0</td>
</tr>
<tr>
<td>3.0.0</td>
<td>6.1.0 (Latest)</td>
<td>4.2.0 (Latest)</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>We assume that you already have an existing WSO2 Open Banking 2.0.0 solution for the UK. WSO2 API Manager 3.1.0 and WSO2 Identity Server 5.10.0 are the base products required for WSO2 Open Banking 2.0.0. Therefore, we assume you already have WSO2 API Manager 3.1.0 and WSO2 Identity Server 5.10.0.</p>
<blockquote>
<p><strong>Important:</strong></p>
<ul>
<li>
<p>In order to upgrade your existing Open Banking solution to the latest version, you need to upgrade the base products (WSO2 Identity Server and WSO2 API Manager) to the latest supported version as well.</p>
</li>
<li>
<p>Upgrading the base products involves step-by-step migrations, and therefore it requires several intermediate steps.</p>
</li>
<li>In addition to the base product migration, you need to configure WSO2 Identity Server as Key Manager. The Key Manager handles all clients, security, and access token-related operations. So you need to configure WSO2 Identity Server as Key Manager in each WSO2 API Manager migration.</li>
</ul>
</blockquote>
<p>The following diagram explains the flow of upgrading the WSO2 Open Banking solution:</p>
<p><img alt="migration-flow" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/migration-flow.png" /></p>
<p>Given below are the steps you need to follow to upgrade your WSO2 Open Banking 2.0.0 for the UK setup to WSO2 Open Banking 3.0.0 - UK Toolkit 1.0.0:</p>
<ol>
<li>
<p>Upgrading WSO2 API Manager from 3.1.0 to 3.2.0 </p>
<ol>
<li>Setup IS as Key Manager 5.10.0 with API Manager 3.2.0</li>
<li>Upgrade API Manager from 3.1.0 to 3.2.0</li>
</ol>
</li>
<li>
<p>Upgrading WSO2 Identity Sever from 5.10.0 to 5.11.0 </p>
<ol>
<li>Upgrade IS as Key Manager 5.10.0 to IS 5.11.0</li>
<li>Upgrade WSO2 Identity Sever from 5.10.0 to 5.11.0</li>
</ol>
</li>
<li>
<p>Upgrading WSO2 API Manager from 3.2.0 to 4.0.0 </p>
<ol>
<li>Configuring IS as Key Manager</li>
<li>Upgrading API Manager from 3.2.0 to 4.0.0</li>
</ol>
</li>
<li>
<p>Upgrading WSO2 API Manager from 4.0.0 to 4.2.0 and WSO2 Identity Server from 5.11.0 to 6.1.0 </p>
<ol>
<li>Prepare for Migration</li>
<li>Upgrading WSO2 Identity Server from 5.11.0 to 6.1.0</li>
<li>Upgrading WSO2 API Manager from 4.0.0 to 4.2.0</li>
</ol>
</li>
<li>
<p>Migrating Open Banking Data</p>
</li>
</ol>
<p>This is the step where you migrate Open Banking data. This involves moving the data from your existing Open Banking platform to the new WSO2 Open Banking platform. This includes data such as customer accounts, transactions, and permissions.</p>
<ol>
<li>Migrating Reporting Data </li>
</ol>
<p>Migrating Reporting Data involves moving the data from your existing reporting system to the new WSO2 Open Banking platform. This includes data such as reports, dashboards, and visualizations.</p>
<ol>
<li>Configuring After Migration</li>
</ol>
<p>This section explains the modifications that need to be performed after the upgrade/migration process.</p>
<blockquote>
<p><strong>Before you begin:</strong></p>
<p>Make sure the following:</p>
<ul>
<li>
<p>The DCR applications created in Open Banking 2.0.0 should not contain a SoftwareId/IssuerName that includes an underscore <strong>"_"</strong>.</p>
</li>
<li>
<p>If you have such DCR applications, before the migration process, rename the <strong>Service Provider Name</strong> of each DCR application's Service Provider application by logging into <code>https://&lt;IS_HOST&gt;:9446/carbon</code>.</p>
</li>
<li>
<p>In your Open Banking 2.0.0 database, check the column size of the following:</p>
<table>
<thead>
<tr>
<th>Database</th>
<th>Table</th>
<th>Column</th>
<th>Data type</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>openbank_apimgtdb</code></td>
<td><code>SP_METADATA</code></td>
<td><code>VALUE</code></td>
<td><code>VARCHAR</code></td>
<td>4096</td>
</tr>
</tbody>
</table>
<ul>
<li>If the column size is less than 4096, execute the following command against the <code>SP_METADATA</code> table:<pre><code>``` 
ALTER TABLE SP_METADATA MODIFY VALUE VARCHAR(4096); 
```
</code></pre>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="1-upgrading-from-wso2-api-manager-310-to-wso2-api-manager-320">1. Upgrading from WSO2 API Manager 3.1.0 to WSO2 API Manager 3.2.0<a class="headerlink" href="#1-upgrading-from-wso2-api-manager-310-to-wso2-api-manager-320" title="Permanent link">&para;</a></h1>
<p>This section instructs you on how to migrate WSO2 API Manager from 3.1.0 to WSO2 API Manager 3.2.0, which is a prerequisite for upgrading to the latest API Manager version.</p>
<h2 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h2>
<p>WSO2 API Manager 3.1.0 is a base product of WSO2 Open Banking 2.0.0. Therefore, we assume you already have WSO2 API Manager 3.1.0.</p>
<p>Upgrading WSO2 API Manager from 3.1.0 to 3.2.0 consists of 2 steps:</p>
<p>a. Upgrade WSO2 IS as Key Manager 5.10.0 for API Manager 3.2.0</p>
<p>b. Upgrade WSO2 API Manager from 3.1.0 to 3.2.0</p>
<h2 id="a-upgrade-wso2-is-as-key-manager-5100-for-api-manager-320">a. Upgrade WSO2 IS as Key Manager 5.10.0 for API Manager 3.2.0<a class="headerlink" href="#a-upgrade-wso2-is-as-key-manager-5100-for-api-manager-320" title="Permanent link">&para;</a></h2>
<p>Follow the <strong>Upgrading WSO2 IS as Key Manager 5.10.0 for API Manager 3.2.0</strong> documentation (<code>Upgrade IS as Key Manager 5.10.0 to IS 5.10.0 for APIM 3.1.0 to 3.2.0.md</code>) provided by the WSO2 team and upgrade <strong>IS as Key Manager 5.10.0 for API Manager 3.2.0</strong>. Follow the entire documentation carefully.</p>
<h2 id="b-upgrade-wso2-api-manager-from-310-to-320">b. Upgrade WSO2 API Manager from 3.1.0 to 3.2.0<a class="headerlink" href="#b-upgrade-wso2-api-manager-from-310-to-320" title="Permanent link">&para;</a></h2>
<p>Follow the <strong>Upgrading WSO2 API Manager from 3.1.0 to 3.2.0</strong> documentation (<code>upgrading-from-310-to-320.md</code>) provided by the WSO2 team and upgrade WSO2 API Manager from 3.1.0 to 3.2.0. Follow the entire documentation carefully and make sure to perform the necessary custom steps mentioned below:</p>
<blockquote>
<p><strong>Note</strong></p>
<p>In the above documentation, under <strong>Step 1 - Migrate the API Manager configurations</strong>, skip steps 6,7,8, and 9 as we are only trying to migrate the databases at this level.</p>
</blockquote>
<hr />
<h1 id="2-upgrading-from-wso2-identity-sever-5100-to-wso2-identity-sever-5110">2. Upgrading from WSO2 Identity Sever 5.10.0 to WSO2 Identity Sever 5.11.0<a class="headerlink" href="#2-upgrading-from-wso2-identity-sever-5100-to-wso2-identity-sever-5110" title="Permanent link">&para;</a></h1>
<p>This section instructs you on how to migrate WSO2 Identity Sever 5.10.0 to WSO2 Identity Sever 5.11.0, which is a prerequisite for upgrading to the latest Identity Sever version.</p>
<h2 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">&para;</a></h2>
<p>WSO2 Identity Sever 5.10.0 is a base product of WSO2 Open Banking 2.0.0. Therefore, we assume you already have WSO2 Identity Sever 5.10.0.</p>
<h2 id="set-up-is-5110-as-key-manager-for-api-manager-400">Set up IS 5.11.0 as Key Manager for API Manager 4.0.0<a class="headerlink" href="#set-up-is-5110-as-key-manager-for-api-manager-400" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Download and install the WSO2 Identity Server 5.11.0 distribution from <a href="https://wso2.com/identity-server/">here</a>.</p>
</li>
<li>
<p>Extract the downloaded archive file. This document refers to the root folder of the extracted file as <code>&lt;IS_HOME&gt;</code>.</p>
</li>
</ol>
<h2 id="migrate-to-wso2-identity-sever-5110">Migrate to WSO2 Identity Sever 5.11.0<a class="headerlink" href="#migrate-to-wso2-identity-sever-5110" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Get the <strong>Upgrading WSO2 IS as Key Manager to 5.11.0</strong> documentation (<code>Upgrade IS as Key Manager 5.10.0 to IS 5.11.0 for APIM 3.2.0 to 4.0.0.md</code>) provided by the WSO2 team.</p>
</li>
<li>
<p>Follow <strong>Step B - Migrate IS from 5.10.0 to 5.11.0</strong> under <strong>Step 1 - Upgrade IS as Key Manager 5.10.0 to IS 5.11.0</strong> in the above-mentioned document and upgrade your WSO2 Identity Server.</p>
</li>
<li>
<p>Get the <strong>Upgrading WSO2 Identity Server to 5.11.0</strong> documentation (<code>migrating-to-5110.md</code>) provided by the WSO2 team.</p>
</li>
<li>
<p>Follow <strong>WSO2 Identity Server Migrating to 5.11.0</strong> to upgrade your current <strong>IS as KM 5.10.0</strong> distribution to IS 5.11.0 by following the provided documentation.</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong></p>
<p>In the above documentation, under <strong>Steps to migrate to 5.11.0</strong>,</p>
<ol>
<li>Skip steps 1,2, and 4.</li>
<li>
<p><strong>Do not</strong> copy the API Manager - Key Manager specific configurations from
          &gt;       <code>&lt;OLD_IS_KM_HOME&gt;/repository/conf/api-manager.xml</code> of the previous IS as KM version to IS 5.11.0.</p>
</li>
<li>
<p>Before executing the IS migration client according to Step 10, remove the following entries from
          <code>migration-config.yaml</code> in the migration-resources directory:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;5.10.0&quot;</span>
<span class="w">  </span><span class="nt">migratorConfigs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MigrationValidator&quot;</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="p p-Indicator">-</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SchemaMigrator&quot;</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;step2&quot;</span>
<span class="w">    </span><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;identity&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TenantPortalMigrator&quot;</span>
<span class="w">    </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
</code></pre></div>

</li>
<li>
<p>Follow the step 11, only if you have enabled Symmetric Key Encryption in the previous IS as KM setup. If not, skip step 11.</p>
</li>
</ol>
<p><strong>Warning</strong></p>
<p>Based on the number of records in the identity tables, the identity component migration will take a considerable time.
  Do not stop the server during the migration process. Wait until the migration process finishes completely and the server gets started.</p>
</blockquote>
<ol>
<li>After successfully completing the migration, stop the server and remove the following directories and files.<ul>
<li>Remove the <code>&lt;IS_HOME&gt;/repository/components/dropins/org.wso2.carbon.is.migration-x.x.x.jar</code> file.</li>
<li>Remove the <code>&lt;IS_HOME&gt;/migration-resources</code> directory.</li>
</ul>
</li>
</ol>
<hr />
<h1 id="3-upgrading-from-wso2-api-manager-320-to-wso2-api-manager-400">3. Upgrading from WSO2 API Manager 3.2.0 to WSO2 API Manager 4.0.0<a class="headerlink" href="#3-upgrading-from-wso2-api-manager-320-to-wso2-api-manager-400" title="Permanent link">&para;</a></h1>
<p>This section instructs you on how to migrate WSO2 API Manager 3.2.0 to WSO2 API Manager 4.0.0, which is a prerequisite for upgrading to the latest Identity Sever version.</p>
<h2 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link">&para;</a></h2>
<p>We assume you have already upgraded your API Manager to 3.2.0 as instructed in a previous step.</p>
<ol>
<li>
<p>Download and install the WSO2 API Manager 4.0.0 distribution from <a href="https://wso2.com/api-manager/">here</a>.</p>
</li>
<li>
<p>Extract the downloaded archive file. This document refers to the root folder of the extracted file as <code>&lt;APIM_HOME&gt;</code>.</p>
</li>
</ol>
<h2 id="upgrade-to-wso2-api-manager-400">Upgrade to WSO2 API Manager 4.0.0<a class="headerlink" href="#upgrade-to-wso2-api-manager-400" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Before you begin:</strong></p>
<p>Once the Identity Server 5.11.0 is configured as the Resident Key Manager, start the Identity Server 5.11.0.</p>
</blockquote>
<ol>
<li>
<p>Start the WSO2 API Manager 4.0.0 server and create a Custom Key Manager by following the
   <a href="https://uk.ob.docs.wso2.com/en/latest/try-out/dynamic-client-registration-flow/#configuring-is-as-key-manager">Configuring IS as Key Manager</a> documentation.</p>
</li>
<li>
<p>Do not copy any other Key Manager specific configurations from the previous API Manager version to the latest one that points to the Identity Server.</p>
</li>
<li>
<p>Follow the <strong>Upgrading WSO2 API Manager from 3.2.0 to 4.0.0</strong> (<code>upgrading-from-320-to-400.md</code>) documentation provided by the WSO2 team and upgrade your API Manager from 3.2.0 to 4.0.0. Follow the entire documentation carefully and make sure to perform the necessary steps mentioned below:</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong></p>
<p>When following the above-mentioned documentation:</p>
<ol>
<li>
<p>You can skip the steps 1,2, and 3 under <strong>Step 1 - Migrate the API Manager configurations</strong>.</p>
</li>
<li>
<p>Modify the following configurations in the <code>&lt;APIM_HOME&gt;/repository/conf/deployment.toml</code> file before starting the migration.</p>
<div class="highlight"><pre><span></span><code><span class="k">[[apim.gateway.environment]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Production and Sandbox&quot;</span>
<span class="k">[apim.sync_runtime_artifacts.gateway]</span>
<span class="n">gateway_labels</span><span class="w"> </span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Production and Sandbox&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Default&quot;</span><span class="p">]</span>
</code></pre></div>

</li>
<li>
<p>In <strong>Step 2 - Upgrade API Manager to 4.0.0</strong>, skip the steps 3 and 5.</p>
</li>
</ol>
</blockquote>
<ol>
<li>Start the API Manager server.</li>
</ol>
<h3 id="replace-custom-mediation-policies">Replace Custom Mediation Policies<a class="headerlink" href="#replace-custom-mediation-policies" title="Permanent link">&para;</a></h3>
<p>This section explains how to replace the Custom Mediation Policy of each API with the latest Mediation Policy.</p>
<ol>
<li>Go to the API Publisher at <code>https://&lt;APIM_HOST&gt;:9443/publisher</code>.</li>
<li>Select the respective API.</li>
<li>Go to <strong>API Configurations &gt; Runtime</strong>.</li>
<li>Click the <strong>Edit</strong> button under <strong>Request &gt; Message Mediation</strong> and remove the existing Custom Mediation Policy.</li>
<li>Upload the relevant insequence file from the <code>&lt;APIM_HOME&gt;/&lt;OB_APIM_TOOLKIT_HOME&gt;/repository/resources/apis</code> directory
   and click <strong>Select</strong>.</li>
<li>Scroll down and click <strong>SAVE</strong>.</li>
<li>Go to <strong>Deployments</strong> using the left menu pane.</li>
<li>Click <strong>Deploy New Version</strong>.</li>
<li>Select the <strong>API Gateway type</strong> and <strong>Deploy</strong>.</li>
<li>Repeat these steps for all APIs.</li>
</ol>
<h3 id="enable-schema-validation">Enable Schema Validation<a class="headerlink" href="#enable-schema-validation" title="Permanent link">&para;</a></h3>
<p>This section explains how to enable Schema Validation for APIs.</p>
<ol>
<li>Go to the API Publisher at <code>https://&lt;APIM_HOST&gt;:9443/publisher</code>.</li>
<li>Select the respective API.</li>
<li>Go to <strong>API Configurations &gt; Runtime</strong>.</li>
<li>Enable Schema Validation.</li>
<li>Scroll down and click <strong>SAVE</strong>.</li>
<li>Go to <strong>Deployments</strong> using the left menu pane.</li>
<li>Click <strong>Deploy New Version</strong>.</li>
<li>Select the <strong>API Gateway type</strong> and <strong>Deploy</strong>.</li>
<li>Repeat these steps for all APIs except for the Dynamic Client Registration(DCR) API.</li>
</ol>
<h3 id="update-workflow-extensions">Update Workflow-Extensions<a class="headerlink" href="#update-workflow-extensions" title="Permanent link">&para;</a></h3>
<ol>
<li>Go to the Management Console <code>https://&lt;APIM_HOST&gt;:9443/carbon</code> and log in as the admin user. <img alt="management_console" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/management-console.png" /></li>
<li>Select <strong>Resources &gt; Browse</strong> in the left pane. <br/> <img alt="select-browse" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/select-browse.png" /></li>
<li>Locate the <code>/_system/governance/apimgt/applicationdata/workflow-extensions.xml</code> file. <img alt="workflow_extensions" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/workflow-extensions.png" /></li>
<li>Get the <code>workflow.txt</code> provided by the WSO2 team.</li>
<li>Click <strong>Edit as text</strong> and replace the content with the content you received. <img alt="edit_as_text" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/edit-as-text.png" /></li>
</ol>
<h3 id="update-api-life-cycle">Update API Life Cycle<a class="headerlink" href="#update-api-life-cycle" title="Permanent link">&para;</a></h3>
<ol>
<li>Go to the Management Console <code>https://&lt;APIM_HOST&gt;:9443/carbon</code> and log in as the admin user. <img alt="management_console" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/management-console.png" /></li>
<li>Select <strong>Extensions &gt; Lifecycles</strong>. <br/> <img alt="select_lifecycles" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/select-lifecycles.png" /></li>
<li>Click the <strong>View/Edit</strong> button for APILifeCycle. <img alt="view_edit_lifecycles" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/view-edit-lifecycles.png" /></li>
<li>Get the <code>lifecycle.txt</code> provided by the WSO2 team.</li>
<li>Replace the Lifecycle Source with the content you received.</li>
</ol>
<h3 id="update-identity-provider-entity-id">Update Identity Provider Entity ID<a class="headerlink" href="#update-identity-provider-entity-id" title="Permanent link">&para;</a></h3>
<ol>
<li>Go to Identity Server Management Console <code>https://&lt;IS_HOST&gt;:9446/carbon</code> and log in as the admin user.</li>
<li>Select <strong>Identity Providers &gt; Resident</strong>. <img alt="resident_identity_provider" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/resident-identity-provider.png" /></li>
<li>Go to <strong>Inbound Authentication Configuration &gt; OAuth2/OpenID Connect Configuration</strong>.</li>
<li>Update the <strong>Identity Provider Entity ID</strong> to the following:
    <div class="highlight"><pre><span></span><code>https://&lt;IS_HOST&gt;:9446/oauth2/token
</code></pre></div></li>
</ol>
<p><img alt="update_resident_identity_provider" src="https://uk.ob.docs.wso2.com/en/latest/assets/img/install-and-setup/upgrading-the-solution/update-resident-provider-entity.png" /></p>
<ol>
<li>Click <strong>Update</strong>.</li>
</ol>
<hr />
<h1 id="4-upgrading-from-wso2-api-manager-400-to-wso2-api-manager-420-and-from-wso2-identity-server-5110-to-wso2-identity-server-610">4. Upgrading from WSO2 API Manager 4.0.0 to WSO2 API Manager 4.2.0 and from WSO2 Identity Server 5.11.0 to WSO2 Identity Server 6.1.0<a class="headerlink" href="#4-upgrading-from-wso2-api-manager-400-to-wso2-api-manager-420-and-from-wso2-identity-server-5110-to-wso2-identity-server-610" title="Permanent link">&para;</a></h1>
<p>WSO2 Open Banking 3.0.0 - UK Toolkit 1.0.0 runs on top of WSO2 API Manager 4.2.0 and WSO2 Identity Server 6.1.0. Therefore, you need to upgrade your API Manager and Identity Server to the above-mentioned versions in order to migrate your Open Banking Solution to the latest version.</p>
<p>This section instructs you on how to migrate,
- WSO2 API Manager 4.0.0 to WSO2 API Manager 4.2.0
- WSO2 Identity Server 5.11.0 to WSO2 Identity Server 6.1.0</p>
<h2 id="prerequisites_4">Prerequisites<a class="headerlink" href="#prerequisites_4" title="Permanent link">&para;</a></h2>
<p>Up to this point, you have already migrated to WSO2 API Manager 4.0.0 and WSO2 Identity Server to 5.11.0 as instructed in the previous steps.</p>
<h2 id="prepare-for-migration">Prepare for Migration<a class="headerlink" href="#prepare-for-migration" title="Permanent link">&para;</a></h2>
<p>In the following section, you will be setting up Open Banking Accelerator and UK Toolkit for Identity Server and API Manager. </p>
<ol>
<li>
<p>Download WSO2 Identity Server 6.1.0 from <a href="https://wso2.com/identity-server/">here</a> and extract the folder. This extracted folder will be referred to as <code>&lt;IS_HOME&gt;</code> in this document.</p>
</li>
<li>
<p>Download WSO2 API Manager 4.2.0 from <a href="https://wso2.com/api-manager/">here</a> and extract the folder. This extracted folder will be referred to as <code>&lt;APIM_HOME&gt;</code> in this document.</p>
</li>
<li>
<p>Get WSO2 Open Banking Accelerator 3.0.0 provided by the WSO2 team.</p>
</li>
<li>
<p>Extract the WSO2 Open Banking Accelerator zip files. Get the following accelerators and extract them.</p>
<ul>
<li><code>wso2-obiam-accelerator-3.0.0</code></li>
<li><code>wso2-obam-accelerator-3.0.0</code></li>
</ul>
</li>
<li>
<p>Get WSO2 Open Banking UK Toolkit 1.0.0 provided by the WSO2 team. Get the following toolkits and extract them.</p>
<ul>
<li><code>wso2-obiam-toolkit-uk-1.0.0</code></li>
<li><code>wso2-obam-toolkit-uk-1.0.0</code></li>
</ul>
</li>
<li>
<p>This document uses the following placeholders to refer to the following products:</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Product</th>
<th>Placeholder</th>
</tr>
</thead>
<tbody>
<tr>
<td>WSO2 Identity Server 6.1.0</td>
<td><code>&lt;IS_HOME&gt;</code></td>
</tr>
<tr>
<td>WSO2 API Manager 4.2.0</td>
<td><code>&lt;APIM_HOME&gt;</code></td>
</tr>
<tr>
<td>WSO2 Open Banking Identity Server Accelerator 3.0.0</td>
<td><code>&lt;OB_IS_ACCELERATOR_HOME&gt;</code></td>
</tr>
<tr>
<td>WSO2 Open Banking API Manager Accelerator 3.0.0</td>
<td><code>&lt;OB_APIM_ACCELERATOR_HOME&gt;</code></td>
</tr>
<tr>
<td>WSO2 Open Banking Identity Server UK Toolkit 1.0.0</td>
<td><code>&lt;OB_IS_TOOLKIT_HOME&gt;</code></td>
</tr>
<tr>
<td>WSO2 Open Banking API Manager UK Toolkit 1.0.0</td>
<td><code>&lt;OB_APIM_TOOLKIT_HOME&gt;</code></td>
</tr>
</tbody>
</table>
<ol>
<li>
<p>Follow the <a href="https://uk.ob.docs.wso2.com/en/latest/get-started/quick-start-guide/#getting-wso2-updates">Getting WSO2 Updates</a> documentation and update the base products, accelerators, and toolkits using relevant scripts.</p>
</li>
<li>
<p>Run the <code>merge.sh</code> script in <code>&lt;APIM_HOME&gt;/&lt;OB_APIM_ACCELERATOR_HOME&gt;/bin</code> and <code>&lt;IS_HOME&gt;/&lt;OB_IS_ACCELERATOR_HOME&gt;/bin</code> respectively to copy the Open Banking artifacts into the base product packs.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>./merge.sh
</code></pre></div>

<ol>
<li>Run the <code>merge.sh</code> script in <code>&lt;APIM_HOME&gt;/&lt;OB_APIM_TOOLKIT_HOME&gt;/bin</code> and <code>&lt;IS_HOME&gt;/&lt;OB_IS_TOOLKIT_HOME&gt;/bin</code> respectively:</li>
</ol>
<div class="highlight"><pre><span></span><code>./merge.sh
</code></pre></div>

<ol>
<li>
<p>Add the relevant modifications to the <code>wso2is-5.11.0-deployment-uk.toml</code> file in the <code>&lt;IS_HOME&gt;/&lt;OB_IS_TOOLKIT_HOME&gt;/repository/resources</code> directory.</p>
</li>
<li>
<p>Rename <code>wso2is-5.11.0-deployment-uk.toml</code> to <code>deployment.toml</code>.</p>
</li>
<li>
<p>Copy the <code>deployment.toml</code> file to the <code>&lt;IS_HOME&gt;/repository/conf</code> directory to replace the existing file.</p>
</li>
<li>
<p>Open the <code>&lt;IS_HOME&gt;/repository/conf/deployment.toml</code> file, and configure the hostnames and databases related
   properties accordingly.</p>
<ul>
<li>When configuring database related properties, ensure that the datasources are pointing to the existing databases.</li>
</ul>
</li>
<li>
<p>Add the relevant modifications to the <code>wso2am-4.0.0-deployment-uk.toml</code> file in the <code>&lt;APIM_HOME&gt;/&lt;OB_APIM_TOOLKIT_HOME&gt;/repository/resources</code> directory.</p>
</li>
<li>
<p>Rename <code>wso2am-4.0.0-deployment-uk.toml</code> to <code>deployment.toml</code>.</p>
</li>
<li>
<p>Copy the <code>deployment.toml</code> file to the <code>&lt;APIM_HOME&gt;/repository/conf</code> directory to replace the existing file.</p>
</li>
<li>
<p>Open the <code>&lt;APIM_HOME&gt;/repository/conf/deployment.toml</code> file, and configure the hostnames and databases related
    properties accordingly.</p>
<ul>
<li>When configuring database related properties, ensure that the datasources are pointing to the existing databases.</li>
</ul>
</li>
<li>
<p>Add the following configurations needed for Identity Server 6.1.0 and API Manager 4.2.0.</p>
<ol>
<li>
<p>Add the following configuration in IS 6.1.0 deployment.toml</p>
<div class="highlight"><pre><span></span><code><span class="k">[application_mgt]</span>
<span class="n">enable_role_validation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>

</li>
<li>
<p>Add the following configuration in the <code>deployment.toml</code> file of API Manager 4.2.0 after the configurations done under <code>[open_banking.dcr]</code>. Note that the version must be specified as <code>v3</code> for API Manager 4.2.0.</p>
<div class="highlight"><pre><span></span><code><span class="k">[open_banking.dcr.apim_rest_endpoints]</span>
<span class="n">app_creation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;api/am/devportal/v3/applications&quot;</span>
<span class="n">key_generation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;api/am/devportal/v3/applications/application-id/map-keys&quot;</span>
<span class="n">api_retrieve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;api/am/devportal/v3/apis&quot;</span>
<span class="n">api_subscribe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;api/am/devportal/v3/subscriptions/multiple&quot;</span>
<span class="n">retrieve_subscribe</span><span class="o">=</span><span class="err">&quot;</span><span class="n">api</span><span class="err">/</span><span class="n">am</span><span class="err">/</span><span class="n">devportal</span><span class="err">/</span><span class="n">v3</span><span class="err">/</span><span class="n">subscriptions</span><span class="err"></span>
</code></pre></div>

</li>
</ol>
</li>
<li>
<p>Now all the Open Banking related artifacts and configurations are included in the base packs.</p>
</li>
</ol>
<h2 id="upgrading-wso2-identity-server-from-5110-to-610">Upgrading WSO2 Identity Server from 5.11.0 to 6.1.0<a class="headerlink" href="#upgrading-wso2-identity-server-from-5110-to-610" title="Permanent link">&para;</a></h2>
<ol>
<li>Follow the <strong>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0</strong> documentation (<code>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0.md</code>) provided by the WSO2 team to upgrade WSO2 Identity Server from 5.11.0 to 6.1.0. Follow the entire documentation carefully and make sure to perform the necessary custom steps mentioned below:</li>
</ol>
<blockquote>
<p><strong>Note:</strong></p>
<p>Please note that the instructions provided in the above-mentioned document are also applicable for WSO2 Identity Server 6.1.0.</p>
</blockquote>
<ol>
<li>
<p>Follow the step 4 under <strong>Step A: Upgrade IS 5.11.0 to IS 6.0.0</strong> &gt; <strong>Step 1: Migrate the IS configurations</strong> if applicable.</p>
</li>
<li>
<p>Step 5 under <strong>Step A: Upgrade IS 5.11.0 to IS 6.0.0</strong> &gt; <strong>Step 1: Migrate the IS configurations</strong> refers to the <code>Configurations</code> section of the <strong>Migrating to 6.1.0</strong> documentation (<code>migrate-to-610.md</code>). Skip the step 3 of that section.</p>
</li>
<li>
<p>Follow the steps mentioned in the <code>Note</code> provided under the step 5 under <strong>Step A: Upgrade IS 5.11.0 to IS 6.0.0</strong> &gt; <strong>Step 1: Migrate the IS configurations</strong>.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong></p>
<p>Here, we need to point the datasources to the existing databases.</p>
</blockquote>
<ol>
<li>
<p>When following the step 2 of the <strong>Step 2: Migrate the IS Resources</strong> in the above-mentioned document, use the IS connector related to the API Manager 4.2.0 provided by the WSO2 team (<code>wso2is-extensions-1.6.8.zip</code>). Please use the jar versions included in the provided <code>wso2is-extensions-1.6.8.zip</code> folder.</p>
</li>
<li>
<p>For the step 4 under the <strong>Step 2: Migrate the IS Resources</strong> topic in the above-mentioned documentation please refer to the <strong>Migrating to 6.1.0</strong> documentation (<code>migrate-to-610.md</code>). Follow all the steps in <strong>Step A: Upgrade IS 5.11.0 to IS 6.0.0/6.1.0</strong> in order, skipping the steps mentioned below.</p>
<ol>
<li>
<p>Skip the <strong>Components</strong> section under <strong>Step 1: Migrate artifacts and configs</strong> when following the above-mentioned documentation (<code>migrate-to-610.md</code>).</p>
</li>
<li>
<p>When following the <strong>Resources</strong> section under <strong>Step 1: Migrate artifacts and configs</strong>, skip the configurations included inside the <strong>Note</strong>.</p>
</li>
<li>
<p>Skip the <strong>Tenants</strong> section under <strong>Step 1: Migrate artifacts and configs</strong>.</p>
</li>
<li>
<p>The <strong>User Stores</strong> section under <strong>Step 1: Migrate artifacts and configs</strong> is optional.</p>
</li>
<li>
<p>Skip the <strong>Webapps</strong> section under <strong>Step 1: Migrate artifacts and configs</strong>.</p>
</li>
<li>
<p>The instructions under the <strong>Configurations</strong> section is already followed at this point. Therefore, not need to follow that..</p>
</li>
</ol>
</li>
<li>
<p>When following <strong>Step 3: Migrate the IS Components</strong> in the <strong>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0</strong> documentation (<code>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0.md</code>) use the migration tool provided by the WSO2 team (<code>wso2is-migration-1.1.163.zip</code>).</p>
</li>
<li>
<p>Then run the migration tool at the step 8 after following the rest of the instructions.</p>
</li>
<li>
<p>Following the <strong>Step A: Upgrade IS 5.11.0 to IS 6.0.0/6.1.0</strong> of the <strong>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0</strong> documentation (<code>Upgrade IS 5.11.0 to IS 6.0.0 for APIM 4.0.0 to 4.2.0.md</code>) with the above instructions, concludes the Identity Server migration.</p>
</li>
</ol>
<p>Then start the API Manager migration.</p>
<h2 id="upgrading-wso2-api-manager-from-400-to-420">Upgrading WSO2 API Manager from 4.0.0 to 4.2.0<a class="headerlink" href="#upgrading-wso2-api-manager-from-400-to-420" title="Permanent link">&para;</a></h2>
<p>Follow the <strong>Upgrading API Manager from 4.0.0 to 4.2.0</strong> documentation (<code>upgrading-from-400-to-420.md</code>) provided by the WSO2 team to perform the API Manager migration. Follow the entire documentation carefully and make sure to perform the necessary custom steps mentioned below:</p>
<ol>
<li>
<p>When following step 1 in <strong>Step 1: Migrate the API Manager Configurations</strong>, make sure to point the datasources to the existing databases.</p>
</li>
<li>
<p>When setting the <code>realm_manager</code>, set it as same as the datasource name of the user database of Open Banking (for example, by default it is <code>WSO2UM_DB</code>.)</p>
</li>
<li>
<p>Skip step 3 under <strong>Step 1: Migrate the API Manager Configurations</strong>.</p>
</li>
<li>
<p>Follow step 4 under <strong>Step 1: Migrate the API Manager Configurations</strong> if applicable.</p>
</li>
<li>
<p>For the step 5 under <strong>Step 1: Migrate the API Manager Configurations</strong> use the relevant database scripts provided by the WSO2 team (<code>db-scripts/upgrading-from-400-to-420</code>).</p>
</li>
<li>
<p>When following <strong>Step 2: Migrate the API Manager Resources</strong> in the above-mentioned documentation,</p>
<ul>
<li>Skip steps 2 and 3.</li>
<li>Follow the step 4 only if the secure vault is enabled.</li>
<li>Skip step 5 if the setup does not have a secondary user store.</li>
<li>Skip step 6.</li>
</ul>
</li>
<li>
<p>Skip <strong>Step 3: Migrate the Identity Components</strong>.</p>
</li>
<li>
<p>When migrating the API Manager components under <strong>Step 4: Migrate the API Manager Components</strong>, use the latest API Manager migration tool provided by the WSO2 team (<code>wso2am-migration-4.2.0.54.zip</code>).</p>
</li>
<li>
<p>Before running the migration tool for APIM migration, make sure the Identity Server is up.</p>
</li>
<li>
<p>Skip the instructions inside the <strong>Note</strong> under <strong>Step 6: Restart the API Manager Server</strong>.</p>
</li>
<li>
<p>Restart the WSO2 API Manager Server.</p>
</li>
<li>
<p>Following the <strong>Upgrading API Manager from 4.0.0 to 4.2.0</strong> documentation (<code>upgrading-from-400-to-420.md</code>) with the above instructions, concludes the API Manager migration.</p>
</li>
</ol>
<hr />
<h1 id="5-migrating-open-banking-data">5. Migrating Open Banking Data<a class="headerlink" href="#5-migrating-open-banking-data" title="Permanent link">&para;</a></h1>
<p>In this step, you will transfer your Open Banking data from your existing Open Banking 2.0.0 platform to the new WSO2 Open Banking 3.0.0 platform. This process includes moving important information such as customer accounts, transactions, and permissions.</p>
<blockquote>
<p><strong>Before you begin:</strong></p>
<p>Back up all the databases before performing the migration.</p>
</blockquote>
<ol>
<li>To create the required database tables:<ul>
<li>Run the relevant SQL script in the <code>&lt;IS_HOME&gt;/dbscripts/open-banking/consent</code> directory against
  the <code>openbank_openbankingdb</code> database.</li>
</ul>
</li>
<li>Get the WSO2 Open Banking Migration Client Tool v1.0.0 (<code>wso2-openbanking-migration-1.0.0.zip</code>) provided by the WSO2 team.</li>
<li>Copy the <code>wso2-openbanking-migration-1.0.0/openbanking-migration-resources</code> directory to <code>&lt;IS_HOME&gt;</code>.</li>
<li>Copy the <code>wso2-openbanking-migration-1.0.0/dropins/com.wso2.openbanking.migration-1.0.0.jar</code> file to <code>&lt;IS_HOME&gt;/repository/components/dropins</code>.</li>
<li>Open the <code>wso2-openbanking-migration-1.0.0/openbanking-migration-resources/migration-config.yaml</code> file and
   set the <code>migrationEnable</code> property to <code>true</code>.</li>
<li>
<p>Start the Identity Server with the following command:</p>
<div class="highlight"><pre><span></span><code>   sh wso2server.sh -DobMigrationSpec=UK
</code></pre></div>

</li>
<li>
<p>Stop the server.</p>
</li>
</ol>
<blockquote>
<p><strong>Warning</strong></p>
<p>If a failure occurred during the migration process, delete all the migrated data from the tables that
   were generated during migration.</p>
</blockquote>
<ol>
<li>Remove the <code>&lt;IS_HOME&gt;/repository/components/dropins/com.wso2.openbanking.migration-1.0.0.jar</code> file.</li>
<li>Remove the <code>&lt;IS_HOME&gt;/openbanking-migration-resources</code> directory.</li>
<li>Start the Identity Server and API Manager servers.</li>
</ol>
<hr />
<h1 id="6-migrating-reporting-data">6. Migrating Reporting Data<a class="headerlink" href="#6-migrating-reporting-data" title="Permanent link">&para;</a></h1>
<p>In this step, you will transfer data from your existing reporting system to the new WSO2 Open Banking platform. This will involve moving data related to reports, dashboards, and visualizations.</p>
<blockquote>
<p><strong>Before you begin:</strong></p>
<p>Make sure you are running Data Reporting v3.1.5 in your WSO2 Open Banking Business Intelligence 2.0.0 setup.
   If not, follow the <a href="https://docs.wso2.com/display/OB200/PSD2+Data+Reporting#PSD2DataReporting-DataReportingv3.1.5">Upgrading Data Reporting from v3.1.2 to v3.1.5</a>
documentation and upgrade.</p>
</blockquote>
<ol>
<li>Stop the WSO2 Open Banking Business Intelligence 2.0.0 server if it is running.</li>
<li>Download and install the WSO2 Streaming Integrator 4.0.0 distribution from <a href="https://wso2.com/integration/streaming-integrator/">here</a>.</li>
<li>Backup your <code>openbank_ob_reporting_statsdb</code> and <code>openbank_ob_reporting_summarizeddb</code> databases of your WSO2 Open Banking Business Intelligence 2.0.0 setup.</li>
</ol>
<h2 id="set-up-open-banking-accelerator-and-uk-toolkit-for-streaming-integrator">Set up Open Banking Accelerator and UK Toolkit for Streaming Integrator<a class="headerlink" href="#set-up-open-banking-accelerator-and-uk-toolkit-for-streaming-integrator" title="Permanent link">&para;</a></h2>
<p>Set up WSO2 Open Banking Business Intelligence Accelerator and WSO2 Open Banking Business Intelligence UK Toolkit
as follows:</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li><code>&lt;SI_HOME&gt;</code> refers to the root directory of WSO2 Streaming Integrator.</li>
<li><code>&lt;OB_BI_ACCELERATOR_HOME&gt;</code> refers to the root directory of WSO2 Open Banking Business Intelligence Accelerator.</li>
<li><code>&lt;OB_BI_TOOLKIT_HOME&gt;</code> refers to the root directory of WSO2 Open Banking Business Intelligence UK Toolkit.</li>
</ul>
</blockquote>
<ol>
<li>
<p>Copy and extract the <code>wso2-obbi-accelerator-3.0.0.zip</code> accelerator file in the root directory of WSO2 Streaming
   Integrator.</p>
</li>
<li>
<p>Run the <code>merge.sh</code> script in <code>&lt;SI_HOME&gt;/&lt;OB_BI_ACCELERATOR_HOME&gt;/bin</code>:</p>
<div class="highlight"><pre><span></span><code>./merge.sh
</code></pre></div>

</li>
<li>
<p>Copy and extract the <code>wso2-obbi-toolkit-uk-1.0.0.zip</code> toolkit file in the root directory of WSO2 Streaming
   Integrator.</p>
</li>
<li>
<p>Run the <code>merge.sh</code> script in <code>&lt;SI_HOME&gt;/&lt;OB_BI_TOOLKIT_HOME&gt;/bin</code>.</p>
<div class="highlight"><pre><span></span><code>./merge.sh
</code></pre></div>

</li>
<li>
<p>Replace the existing <code>deployment.yaml</code> file in the Streaming Integrator as follows:</p>
<ul>
<li>Go to the <code>&lt;SI_HOME&gt;/&lt;OB_BI_ACCELERATOR_HOME&gt;/repository/resources</code> directory.</li>
<li>Rename <code>wso2si-4.0.0-deployment.yaml</code> to <code>deployment.yaml</code>.</li>
<li>Copy the <code>deployment.yaml</code> file to the <code>&lt;SI_HOME&gt;/conf/server</code> directory to replace the existing file.</li>
</ul>
</li>
<li>
<p>Open the <code>&lt;SI_HOME&gt;/conf/server/deployment.toml</code> file, and configure the hostnames and databases related
   properties accordingly.</p>
<ul>
<li>When configuring database related properties, point to your existing Open Banking 2.0 databases.</li>
</ul>
</li>
<li>
<p>Exchange the public certificates between servers.</p>
</li>
</ol>
<blockquote>
<p><strong>Follow the steps given below:</strong></p>
<p>a. Go to the <code>&lt;SI_HOME&gt;/resources/security</code> directory and export the public certificate of the Streaming
   Integrator:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-export<span class="w"> </span>-alias<span class="w"> </span>wso2carbon<span class="w"> </span>-keystore<span class="w"> </span>wso2carbon.jks<span class="w"> </span>-file<span class="w"> </span>publickeySI.pem
</code></pre></div>

<p>b. Go to the <code>&lt;IS_HOME&gt;/repository/resources/security</code> directory and import the public certificate of the
   Streaming Integrator to the truststore of the Identity Server:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-import<span class="w"> </span>-alias<span class="w"> </span>wso2<span class="w"> </span>-file<span class="w"> </span>publickeySI.pem<span class="w"> </span>-keystore<span class="w"> </span>client-truststore.jks<span class="w"> </span>-storepass<span class="w"> </span>wso2carbon
</code></pre></div>

<p>c. Go to the <code>&lt;IS_HOME&gt;/repository/resources/security</code> directory and export the public certificate of the
   Identity Server:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-export<span class="w"> </span>-alias<span class="w"> </span>wso2carbon<span class="w"> </span>-keystore<span class="w"> </span>wso2carbon.jks<span class="w"> </span>-file<span class="w"> </span>publickeyIAM.pem
</code></pre></div>

<p>d. Go to the <code>&lt;SI_HOME&gt;/resources/security</code> directory and import the public certificate of the Identity
   Server to the truststore of the Streaming Integrator:</p>
<div class="highlight"><pre><span></span><code>keytool<span class="w"> </span>-import<span class="w"> </span>-alias<span class="w"> </span>wso2<span class="w"> </span>-file<span class="w"> </span>publickeyIAM.pem<span class="w"> </span>-keystore<span class="w"> </span>client-truststore.jks<span class="w"> </span>-storepass<span class="w"> </span>wso2carbon
</code></pre></div>

<p>e. Go to the <code>&lt;APIM_HOME&gt;/repository/resources/security</code> directory and repeat step b,c, and d.</p>
</blockquote>
<h2 id="upgrade-to-wso2-streaming-integrator-400">Upgrade to WSO2 Streaming Integrator 4.0.0<a class="headerlink" href="#upgrade-to-wso2-streaming-integrator-400" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>To migrate the reporting data and tables from the Open Banking 2.0 setup to 3.0.</p>
<ul>
<li>Go to the
  <code>wso2-openbanking-migration-1.0.0/openbanking-migration-resources/reporting-migration-scripts/uk</code>
  directory.</li>
<li>Select the relevant SQL script and execute it against your <code>openbank_ob_reporting_statsdb</code> database.</li>
</ul>
</li>
<li>
<p>Start the Streaming Integrator server. For more information, see <a href="https://uk.ob.docs.wso2.com/en/latest/get-started/data-publishing-try-out/">Try Out Data Publishing</a>.</p>
</li>
</ol>
<hr />
<h1 id="7-configuring-after-migration">7. Configuring After Migration<a class="headerlink" href="#7-configuring-after-migration" title="Permanent link">&para;</a></h1>
<p>This section explains the modifications that need to be performed after the upgrade/migration process.</p>
<ol>
<li>
<p>Stop the servers if running.</p>
</li>
<li>
<p>Remove <code>com.wso2.openbanking.migration-1.0.0.jar</code> from the <code>IS_HOME&gt;/repository/components/dropins</code> folder.</p>
</li>
<li>
<p>Remove <code>openbanking-migration-resources</code> folder from the <code>&lt;IS_HOME&gt;/repository/components/dropins</code> folder.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong></p>
<p>Make sure to perform the following changes before starting with the Open Banking flows:
   1. Redeploy the APIs with the relevant insequence files supported in WSO2 Open Banking 3.0.0 UK Toolkit 1.0.0.
   2. Ensure the Production/Sandbox Endpoints of the published APIs are precise.</p>
<ul>
<li>Follow the <a href="https://uk.ob.docs.wso2.com/en/latest/get-started/try-out-flow/">Quick Start Guide - Tryout Flow of the UK Toolkit 1.0.0 documentation</a> for a sample tryout flow of the Account and Transaction API.</li>
<li>Navigate to the <strong>Tryout</strong> section in the <a href="https://uk.ob.docs.wso2.com/en/latest/try-out/dynamic-client-registration-flow/">UK Toolkit 1.0.0 documentation</a> for more information on API flows.</li>
</ul>
</blockquote>
<ol>
<li>
<p>Restart the WSO2 Identity Server.</p>
</li>
<li>
<p>Restart the WSO2 API Manager Server. </p>
</li>
</ol>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <!--
 * Copyright (c) 2021, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.

 NOTE: Borrowed generously from MkDocs and MkDocs-material
-->

<footer class="md-footer md-typeset">

  <!--
 * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->

<div class="md-copyright md-typeset">
  <div class="md-copyright__content">
    <div class="md-copyright__highlight">
      
      &copy; 2024 <a href="https://wso2.com/">WSO2</a> LLC.
      
    </div>
  </div>
</div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.path", "navigation.top", "content.code.copy", "content.action.edit", "content.action.view", "content.tabs.link", "search.suggest", "search.share"], "search": "../../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../../../../../../assets/js/theme.js"></script>
      
        <script src="../../../../../../assets/js/homePage.js"></script>
      
    
  </body>
</html>